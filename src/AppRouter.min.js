var AppRouter=function(e){var r={routes:{},init:function(){void 0!=typeof e&&(r.routes=e);for(var t in r.routes)r.routes.hasOwnProperty(t)&&(r.routes[t]=r.processNewRoute(r.routes[t]))},processNewRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs={keys:[],obj:{},arr:[]},e.pattern=e.pattern.replace(/\/+$/,""),""==e.pattern&&(e.pattern="/"),e.compiledRegex=r.compileRoute(e,e.pattern,e.defaults,e.requirements),e},compileRoute:function(e,t,o,u){var s=t.match(/({([^\/{}]+)})/g),a={};if(s)for(var n=0;n<s.length;n++){_slugMatch=s[n],s[n]=s[n].replace(/^({)|(})$/g,"");var l="([^\\/?#]+)";void 0!==u[s[n]]&&(l="("+u[s[n]]+")"),_slugMatch="\\{"+s[n]+"\\}",e.defaultSlugs.keys.push(s[n]),void 0!==o[s[n]]?(e.defaultSlugs.obj[s[n]]=o[s[n]],e.defaultSlugs.arr.push(o[s[n]]),n==s.length-1&&(l="(?:\\/"+l+")?",_slugMatch="\\/"+_slugMatch),delete e.defaults[s[n]]):(e.defaultSlugs.obj[s[n]]=void 0,e.defaultSlugs.arr.push(void 0)),a[_slugMatch]=l}t=r.regexEscape(t);for(var c in a)a.hasOwnProperty(c)&&(t=t.replace(c,a[c]));return t="^"+t+"$",RegExp(t)},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var r=e.constructor();for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}},t={setRoutes:function(e){r.routes=e;for(var t in r.routes)r.routes.hasOwnProperty(t)&&(r.routes[t]=r.processNewRoute(r.routes[t]))},addRoute:function(e,t,o){r.routes[e]=t,void 0!==o&&(r.routes[e].action=o),r.routes[e]=r.processNewRoute(r.routes[e])},addRoutes:function(e){for(var t in e)e.hasOwnProperty(t)&&(r.routes[t]=e[t],r.routes[t]=r.processNewRoute(r.routes[t]))},match:function(e){e=e.replace(/\/+$/,""),""==e&&(e="/");for(var t in r.routes)if(r.routes.hasOwnProperty(t)){var o=e.match(r.routes[t].compiledRegex);if(o){for(var u={obj:r.cloneObject(r.routes[t].defaultSlugs.obj),arr:r.routes[t].defaultSlugs.arr.slice()},s=0;s<u.arr.length;s++)void 0!==o[s+1]&&(u.obj[r.routes[t].defaultSlugs.keys[s]]=o[s+1],u.arr[s]=o[s+1]);return{action:r.routes[t].action,slugs:u,defaults:r.cloneObject(r.routes[t].defaults)}}}return null}};return r.init(),t};