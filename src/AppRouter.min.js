var AppStorage=function(){var e={routes:{},init:function(){void 0!=typeof _routes&&(e.routes=_routes);for(var t in e.routes)e.routes.hasOwnProperty(t)&&(e.routes[t]=e.processNewRoute(e.routes[t]))},addRoute:function(t,r,o){e.routes[t]=r,void 0!==o&&(e.routes[t].action=o),e.routes[t]=e.processNewRoute(e.routes[t])},addRoutes:function(t){for(var r in t)t.hasOwnProperty(r)&&(e.routes[r]=t[r],e.routes[r]=e.processNewRoute(e.routes[r]))},setRoutes:function(t){e.routes=t},processNewRoute:function(t){return void 0===t.defaults&&(t.defaults={}),void 0===t.requirements&&(t.requirements={}),t.defaultSlugs=[],t.compiledRegex=e.compilePatternRegex(t,t.pattern,t.defaults,t.requirements),t},compilePatternRegex:function(t,r,o,u){var s=r.match(/({([^\/{}]+)})/g),n={};if(s)for(var a=0;a<s.length;a++){_slugMatch=s[a],s[a]=s[a].replace(/^({)|(})$/g,"");var c="([^\\/?#]+)";void 0!==u[s[a]]&&(c="("+u[s[a]]+")"),_slugMatch="\\{"+s[a]+"\\}",void 0!==o[s[a]]?(t.defaultSlugs.push(o[s[a]]),c="(?:\\/"+c+"|\\/)?",_slugMatch="\\/"+_slugMatch,delete t.defaults[s[a]]):t.defaultSlugs.push(void 0),n[_slugMatch]=c}r=e.regexEscape(r);for(var i in n)n.hasOwnProperty(i)&&(r=r.replace(i,n[i]));return r="^"+r+"$",RegExp(r)},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},match:function(t){for(var r in e.routes)if(e.routes.hasOwnProperty(r)){var o=t.match(e.routes[r].compiledRegex);if(o){for(var u=e.routes[r].defaultSlugs.slice(),s=0;s<u.length;s++)void 0!==o[s+1]&&(u[s]=o[s+1]);return{action:e.routes[r].action,slugs:u,defaults:e.cloneObject(e.routes[r].defaults)}}}return null},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}};return e.init(),e};