var AppRouter=function(e){var r={routes:{},init:function(){void 0!=typeof e&&(r.routes=e);for(var t in r.routes)r.routes.hasOwnProperty(t)&&(r.routes[t]=r.processNewRoute(r.routes[t]))},processNewRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs={keys:[],obj:{},arr:[]},e.pattern=e.pattern.replace(/\/+$/,""),""==e.pattern&&(e.pattern="/"),e=r.compileRoute(e),clog(e),e},compileRoute:function(e){var t=e.pattern,o=t.match(/({([^\/{}]+)})/g),u={};if(o)for(var s=0;s<o.length;s++){_slugMatch=o[s],o[s]=o[s].replace(/^({)|(})$/g,"");var a="([^\\/?#]+)";void 0!==e.requirements[o[s]]&&(a="("+e.requirements[o[s]]+")"),_slugMatch="\\{"+o[s]+"\\}",e.defaultSlugs.keys.push(o[s]),void 0!==e.defaults[o[s]]?(e.defaultSlugs.obj[o[s]]=e.defaults[o[s]],e.defaultSlugs.arr.push(e.defaults[o[s]]),s==o.length-1&&(a="(?:\\/"+a+")?",_slugMatch="\\/"+_slugMatch),delete e.defaults[o[s]]):(e.defaultSlugs.obj[o[s]]=void 0,e.defaultSlugs.arr.push(void 0)),u[_slugMatch]=a}t=r.regexEscape(t);for(var n in u)u.hasOwnProperty(n)&&(t=t.replace(n,u[n]));return t="^"+t+"$",e.compiledRegex=RegExp(t),e},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var r=e.constructor();for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}},t={setRoutes:function(e){r.routes=e;for(var t in r.routes)r.routes.hasOwnProperty(t)&&(r.routes[t]=r.processNewRoute(r.routes[t]))},addRoute:function(e,t,o){r.routes[e]=t,void 0!==o&&(r.routes[e].action=o),r.routes[e]=r.processNewRoute(r.routes[e])},addRoutes:function(e){for(var t in e)e.hasOwnProperty(t)&&(r.routes[t]=e[t],r.routes[t]=r.processNewRoute(r.routes[t]))},match:function(e){e=e.replace(/\/+$/,""),""==e&&(e="/");for(var t in r.routes)if(r.routes.hasOwnProperty(t)){var o=e.match(r.routes[t].compiledRegex);if(o){for(var u={obj:r.cloneObject(r.routes[t].defaultSlugs.obj),arr:r.routes[t].defaultSlugs.arr.slice()},s=0;s<u.arr.length;s++)void 0!==o[s+1]&&(u.obj[r.routes[t].defaultSlugs.keys[s]]=o[s+1],u.arr[s]=o[s+1]);return{action:r.routes[t].action,slugs:u,defaults:r.cloneObject(r.routes[t].defaults)}}}return null}};return r.init(),t};