var AppRouter=function(e){var r={routes:{},init:function(){void 0!=typeof e&&(r.routes=e);for(var t in r.routes)r.routes.hasOwnProperty(t)&&(r.routes[t]=r.processNewRoute(r.routes[t]))},processNewRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs={keys:[],obj:{},arr:[]},e.pattern=e.pattern.replace(/\/+$/,""),""==e.pattern&&(e.pattern="/"),e=r.compileRoute(e)},compileRoute:function(e){var t=e.pattern,u=t.match(/({([^\/{}]+)})/g),o={};if(u)for(var s=0;s<u.length;s++){_slugMatch=u[s],u[s]=u[s].replace(/^({)|(})$/g,"");var a="([^\\/?#]+)";void 0!==e.requirements[u[s]]&&(a="("+e.requirements[u[s]]+")"),_slugMatch="\\{"+u[s]+"\\}",e.defaultSlugs.keys.push(u[s]),void 0!==e.defaults[u[s]]?(e.defaultSlugs.obj[u[s]]=e.defaults[u[s]],e.defaultSlugs.arr.push(e.defaults[u[s]]),s==u.length-1&&(a="(?:\\/"+a+")?",_slugMatch="\\/"+_slugMatch),delete e.defaults[u[s]]):(e.defaultSlugs.obj[u[s]]=void 0,e.defaultSlugs.arr.push(void 0)),o[_slugMatch]=a}t=r.regexEscape(t);for(var n in o)o.hasOwnProperty(n)&&(t=t.replace(n,o[n]));return t="^"+t+"$",e.compiledRegex=RegExp(t),e},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var r=e.constructor();for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}},t={setRoutes:function(e){r.routes=e;for(var t in r.routes)r.routes.hasOwnProperty(t)&&(r.routes[t]=r.processNewRoute(r.routes[t]))},addRoute:function(e,t,u){r.routes[e]=t,void 0!==u&&(r.routes[e].action=u),r.routes[e]=r.processNewRoute(r.routes[e])},addRoutes:function(e){for(var t in e)e.hasOwnProperty(t)&&(r.routes[t]=e[t],r.routes[t]=r.processNewRoute(r.routes[t]))},match:function(e){e=e.replace(/\/+$/,""),""==e&&(e="/");for(var t in r.routes)if(r.routes.hasOwnProperty(t)){var u=e.match(r.routes[t].compiledRegex);if(u){for(var o={obj:r.cloneObject(r.routes[t].defaultSlugs.obj),arr:r.routes[t].defaultSlugs.arr.slice()},s=0;s<o.arr.length;s++)void 0!==u[s+1]&&(o.obj[r.routes[t].defaultSlugs.keys[s]]=u[s+1],o.arr[s]=u[s+1]);return{action:r.routes[t].action,slugs:o,defaults:r.cloneObject(r.routes[t].defaults)}}}return null}};return r.init(),t};