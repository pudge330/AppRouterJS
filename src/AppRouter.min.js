var AppRouter=function(r){var e={routes:{},init:function(){void 0!=typeof r&&(e.routes=r);for(var t in e.routes)e.routes.hasOwnProperty(t)&&(e.routes[t]=e.processNewRoute(e.routes[t]))},addRoute:function(r,t,a){e.routes[r]=t,void 0!==a&&(e.routes[r].action=a),e.routes[r]=e.processNewRoute(e.routes[r])},addRoutes:function(r){for(var t in r)r.hasOwnProperty(t)&&(e.routes[t]=r[t],e.routes[t]=e.processNewRoute(e.routes[t]))},setRoutes:function(r){e.routes=r;for(var t in e.routes)e.routes.hasOwnProperty(t)&&(e.routes[t]=e.processNewRoute(e.routes[t]))},processNewRoute:function(r){return void 0===r.defaults&&(r.defaults={}),void 0===r.requirements&&(r.requirements={}),r.defaultSlugs=[],r.compiledRegex=e.compileRoute(r,r.pattern,r.defaults,r.requirements),r},compileRoute:function(r,t,a,o){var s=t.match(/({([^\/{}]+)})/g),n={};if(s)for(var u=0;u<s.length;u++){_slugMatch=s[u],s[u]=s[u].replace(/^({)|(})$/g,"");var h="([^\\/?#]+)";void 0!==o[s[u]]&&(h="("+o[s[u]]+")"),_slugMatch="\\{"+s[u]+"\\}",void 0!==a[s[u]]?(r.defaultSlugs.push(a[s[u]]),u==s.length-1&&(h="(?:\\/"+h+"|\\/)?",_slugMatch="\\/"+_slugMatch),delete r.defaults[s[u]]):r.defaultSlugs.push(void 0),n[_slugMatch]=h}t=e.regexEscape(t);for(var i in n)n.hasOwnProperty(i)&&(t=t.replace(i,n[i]));return t="^"+t+"$",RegExp(t)},regexEscape:function(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},match:function(r){for(var t in e.routes)if(e.routes.hasOwnProperty(t)){var a=r.match(e.routes[t].compiledRegex);if(a){for(var o=e.routes[t].defaultSlugs.slice(),s=0;s<o.length;s++)void 0!==a[s+1]&&(o[s]=a[s+1]);return{action:e.routes[t].action,slugs:o,defaults:e.cloneObject(e.routes[t].defaults)}}}return null},cloneObject:function(r){if(null==r||"object"!=typeof r)return r;var e=r.constructor();for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}};return e.init(),e};