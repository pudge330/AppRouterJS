var AppStorage=function(e){var t={routes:{},init:function(){void 0!=typeof e&&(t.routes=e);for(var r in t.routes)t.routes.hasOwnProperty(r)&&(t.routes[r]=t.processNewRoute(t.routes[r]))},addRoute:function(e,r,o){t.routes[e]=r,void 0!==o&&(t.routes[e].action=o),t.routes[e]=t.processNewRoute(t.routes[e])},addRoutes:function(e){for(var r in e)e.hasOwnProperty(r)&&(t.routes[r]=e[r],t.routes[r]=t.processNewRoute(t.routes[r]))},setRoutes:function(e){t.routes=e},processNewRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs=[],e.compiledRegex=t.compilePatternRegex(e,e.pattern,e.defaults,e.requirements),e},compilePatternRegex:function(e,r,o,u){var s=r.match(/({([^\/{}]+)})/g),n={};if(s)for(var a=0;a<s.length;a++){_slugMatch=s[a],s[a]=s[a].replace(/^({)|(})$/g,"");var c="([^\\/?#]+)";void 0!==u[s[a]]&&(c="("+u[s[a]]+")"),_slugMatch="\\{"+s[a]+"\\}",void 0!==o[s[a]]?(e.defaultSlugs.push(o[s[a]]),c="(?:\\/"+c+"|\\/)?",_slugMatch="\\/"+_slugMatch,delete e.defaults[s[a]]):e.defaultSlugs.push(void 0),n[_slugMatch]=c}r=t.regexEscape(r);for(var i in n)n.hasOwnProperty(i)&&(r=r.replace(i,n[i]));return r="^"+r+"$",RegExp(r)},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},match:function(e){for(var r in t.routes)if(t.routes.hasOwnProperty(r)){var o=e.match(t.routes[r].compiledRegex);if(o){for(var u=t.routes[r].defaultSlugs.slice(),s=0;s<u.length;s++)void 0!==o[s+1]&&(u[s]=o[s+1]);return{action:t.routes[r].action,slugs:u,defaults:t.cloneObject(t.routes[r].defaults)}}}return null},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}};return t.init(),t};