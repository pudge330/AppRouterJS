var AppRouter=function(e){var t={routes:{},init:function(){void 0!=typeof e&&(t.routes=e);for(var r in t.routes)t.routes.hasOwnProperty(r)&&(t.routes[r]=t.processNewRoute(t.routes[r]))},processNewRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs={keys:[],obj:{},arr:[]},e.pattern=e.pattern.replace(/\/+$/,""),""==e.pattern&&(e.pattern="/"),e.compiledRegex=t.compileRoute(e,e.pattern,e.defaults,e.requirements),e},compileRoute:function(e,r,o,u){var s=r.match(/({([^\/{}]+)})/g),n={};if(s)for(var a=0;a<s.length;a++){_slugMatch=s[a],s[a]=s[a].replace(/^({)|(})$/g,"");var c="([^\\/?#]+)";void 0!==u[s[a]]&&(c="("+u[s[a]]+")"),_slugMatch="\\{"+s[a]+"\\}",e.defaultSlugs.keys.push(s[a]),void 0!==o[s[a]]?(e.defaultSlugs.obj[s[a]]=o[s[a]],e.defaultSlugs.arr.push(o[s[a]]),a==s.length-1&&(c="(?:\\/"+c+"|\\/)?",_slugMatch="\\/"+_slugMatch),delete e.defaults[s[a]]):(e.defaultSlugs.obj[s[a]]=void 0,e.defaultSlugs.arr.push(void 0)),n[_slugMatch]=c}r=t.regexEscape(r);for(var l in n)n.hasOwnProperty(l)&&(r=r.replace(l,n[l]));return r="^"+r+"$",RegExp(r)},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}},r={setRoutes:function(e){t.routes=e;for(var r in t.routes)t.routes.hasOwnProperty(r)&&(t.routes[r]=t.processNewRoute(t.routes[r]))},addRoute:function(e,r,o){t.routes[e]=r,void 0!==o&&(t.routes[e].action=o),t.routes[e]=t.processNewRoute(t.routes[e])},addRoutes:function(e){for(var r in e)e.hasOwnProperty(r)&&(t.routes[r]=e[r],t.routes[r]=t.processNewRoute(t.routes[r]))},match:function(e){e=e.replace(/\/+$/,""),""==e&&(e="/");for(var r in t.routes)if(t.routes.hasOwnProperty(r)){var o=e.match(t.routes[r].compiledRegex);if(console.log(t.routes[r].compiledRegex),o){for(var u={obj:t.cloneObject(t.routes[r].defaultSlugs.obj),arr:t.routes[r].defaultSlugs.arr.slice()},s=0;s<u.arr.length;s++)void 0!==o[s+1]&&(u.obj[t.routes[r].defaultSlugs.keys[s]]=o[s+1],u.arr[s]=o[s+1]);return{action:t.routes[r].action,slugs:u,defaults:t.cloneObject(t.routes[r].defaults)}}}return null}};return t.init(),r};